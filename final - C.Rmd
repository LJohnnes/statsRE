---
title: "Final Project - Group C"
author: "Group C"
date: "March 12, 2016"
output: html_document
---

ASSIGNMENT GUIDELINES:
From a dataset of your choice, build a regression, classification or clustering method that solves a challenge you must also define. The work must include a brief stat description of the dataset aligned with the goal of the analysis, and the valuation of the different alternatives and choices made during the process. 10 pages max, no code included.

Datasets included in prior public work are not allowed. The work will be assessed considering:
- how relevant and thorough is the stat description,
- information that will help the reproducibility (markdown code, plots, links to datasets, etc.)
- the choice of the model,
the goal of the analysis,
the achievements and
the exposition of results.
The maximum number of pages that the PDF document must have is 10. Your abilities to synthesize relevant information and communicate important results will be also considered.

DATA SET:
Austin Craft Realty
Condo sales in Downtown Austin, Texas for the past year (03/18/2015 - 03/11/2015)


```{r load-data, echo=FALSE}

library(dplyr)
library(ggplot2)
library(gridExtra)
library(GGally)
library(stringi)
library(timeDate)
library(arules)
library(data.table)
data <- read.csv('DataMasters-3.csv', dec=",")
dim(data)
#summary(data)
head(data)
#tail(data)
View(data)


cci <- read.csv('DP_LIVE_15032016091148702.csv', dec=",")
cci <- cci[which(cci$LOCATION == 'USA'),-c(1,2,3,4,5,8)]

```

The first variable, MLS.Number, is a unique identifier and can be removed as it does not aid in predictions. In addition, every observation shares one value for the following variables: Status (Sold), Area (DT) and Street.Dir.Suffix (except for 1). Again, we remove these variables from the data set.

We then create several new variables that could be useful in predictions or interesting to explore:
1. age (Numeric): How old is the home?
2. relisted (Boolean): Was the home taken off market at some point?
3. soldMonth (Categorical): In what month was it sold?
4. listMonth (Categorical): In what month was it listed?
5. soldDay (Categorical): On what day of the week was it sold?
6. Floor (Numeric): On what floor of the building is it?
# we need to be careful with floor, since we may be saying units on the 12th floor are actually on the 1st.
7. Price.Diff (Numeric): How did sale price differ from list price?
8. condoSize (Categorical): What type (size: S,M,L) condo is it?
9. ccilisted (Numeric): What was the consumer confidence index the month the condo listing was posted?
10. ccisold (Numeric): What was the consumer confidence index the month the condo was sold?

#Data Preparation and Creation of New Variables
```{r pre-processing}

data <- data[,-c(1,2,3,8)]

# Create new variables
data$age <- 2016 - data$Year.Built

data$relisted <- data$CDOM - data$ADOM
data$relisted[data$relisted>0] <- 1

#It was all because of using "/" instead of "-"
soldDates <- as.Date(data$Sold.Lease.Date, format = "%m-%d-%Y")
data$soldMonth <- format(as.Date(soldDates), "%m") 

listDate <- soldDates-data$ADOM
data$listMonth <- format(as.Date(listDate), "%m")

data$soldDay <- weekdays(soldDates)

data$Unit.Number <- gsub('[^a-zA-Z0-9.]', '', data$Unit.Number)
data$floor <- stri_extract_first(data$Unit.Number, regex = "\\d")
data$floor <- as.numeric(data$floor)

#removing all sorts of characters (dollar signs in this case) and then changing as numeric 
data$Sold.Lease.Price <- gsub('[^a-zA-Z0-9.]', '', data$Sold.Lease.Price)
data$List.Price <- gsub('[^a-zA-Z0-9.]', '', data$List.Price)
data$Price.Diff <- as.numeric(data$Sold.Lease.Price) - as.numeric(data$List.Price) 
data$Sold.Lease.Price <- as.numeric(data$Sold.Lease.Price)
data$List.Price <- as.numeric(data$List.Price)
#Condo size as discrete
data$condoSize <- discretize(data$Sqft.Total, "cluster", categories = 3, labels=c("small", "medium", "large"))

soldDates <- as.Date(data$Sold.Lease.Date, format = "%m-%d-%Y")
data$soldMonth <- format(as.Date(soldDates), "%m") 


ccidate <- as.Date(cci$TIME, format = "%Y-%m")

#data$ccilisted

#data$ccisold


```


#EXPLORATORY ANALYSIS

#Univariate 
#Univariate Quantitative
#Measures of Central Tendency
```{r Measures of Central Tendency, echo=FALSE}
summary(data)
"""
summary(data$Sold.Lease.Price)
summary(data$List.Price)
summary(data$Price.Diff)
summary(data$age)
summary(data$ADOM)
summary(data$CDOM)
"""
```

```{r Measures of Dispersion, echo=FALSE}
summary.list = function(x)list(
 N.with.NA.removed= length(x[!is.na(x)]),
 Count.of.NA= length(x[is.na(x)]),
 Max.Min=range(x, na.rm=TRUE),
 Range=max(x, na.rm=TRUE) - min(x, na.rm=TRUE),
 Variance=var(x, na.rm=TRUE),
 Std.Dev=sd(x, na.rm=TRUE),
 Coeff.Variation.Prcnt=sd(x, na.rm=TRUE)/mean(x, na.rm=TRUE)*100,
 Std.Error=sd(x, na.rm=TRUE)/sqrt(length(x[!is.na(x)])),
 Quantile=quantile(x, na.rm=TRUE)
)
#Sold Price
summary.list(data$Sold.Lease.Price)
#List Price
summary.list(data$List.Price)
#Price Difference
summary.list(data$Price.Diff)
#Age
summary.list(data$age)
#ADOM
summary.list(data$ADOM)
#CDOM
summary.list(data$CDOM)
```

#Other measures 
```{r Skewness, Kurtosis, echo=FALSE}
skewness(data$Sold.Lease.Price)
kurtosis(data$Sold.Lease.Price)
skewness(data$List.Price)
kurtosis(data$List.Price)
skewness(data$Price.Diff)
kurtosis(data$Price.Diff)
skewness(data$age)
kurtosis(data$age)
skewness(data$ADOM)
kurtosis(data$ADOM)
skewness(data$CDOM)
kurtosis(data$CDOM)
```

#Univariate Graphical
```{r Histograms}

```


```{r Box Plots}

```


```{r Bar Charts}

```


```{r Kernel Density Plots}

```


#Bivariate
#Bivariate Quantitative
```{r Cross tabulation, echo=FALSE}

```

```{r Covariance, echo=FALSE}

```

```{r Correlation, echo=FALSE}

```

#Bivariate Graphical
```{r Scatterplots}

```


#Advanced Bivariate Analysis

```{r ANOVA}

```

```{r Cluster Analysis}

```

#I will complete the above chunks!!!--Begum

```{r regressions, echo=FALSE}

lm(data$Sold.Lease.Price ~.,data=data)

## Split data into training & testing
## 





```


